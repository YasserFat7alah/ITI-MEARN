<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shape</title>
</head>
<body>
    <script>
        /* 
        * - Define Shape Base Abstract Class which contains color property and define PrintColor method 
        *   and CalcArea and Calcperimeter which will return Zero in Shape Base Class , Define them on 
        *   Shape prototype object 
        */
        function Shape(_color) {
            if(this.constructor.name == "Shape"){
                throw new Error("Shape is Abstract Class. Can't create instance of!!");
            }else{
                this.Color = _color;
                
            }
        }

        Shape.prototype.PrintColor = function () { console.log(`color : ${this.Color}`) };
        Shape.prototype.CalcArea = function () { return 0; };
        Shape.prototype.CalcPerimeter = function () { return 0; };

        /* 
        * - Define Rect Class Which inherits from Shape Abstract Class (prototypal inheritance) 
        *   Define Width and Height Properties for Rect Class  
        */
        function Rect(_color, _width, _height) {
            Shape.call(this, _color);
            this.Width = _width;
            this.Height = _height;
            Rect.NumberOfObjects = this.constructor.name == 'Rect'? (Rect.NumberOfObjects || 0) +1: (Rect.NumberOfObjects || 0) ; 
        }

        Rect.prototype = Object.create(Shape.prototype);
        Rect.prototype.constructor = Rect;

        Rect.prototype.CalcArea = function () { return (this.Width*this.Height); };
        Rect.prototype.CalcPerimeter = function () { return ((this.Width+this.Height)*2); };
        Rect.prototype.toString = function() { console.log(`${this.constructor.name} =>\n color: ${this.Color} \n width: ${this.Width} \n height: ${this.Height} \n area: ${this.CalcArea()} \n perimeter: ${this.CalcPerimeter()} \n`)};

        /* 
        * - Define Square Class Which inherits from Rect Class   - override CalcArea , calcperimeter , printColor , toString which will display color , area and 
        *    perimeter in rect and square classes 
        */
        
        function Square(_color, _width) {
            Rect.call(this, _color, _width, _width);
            this.Width = _width;
            Square.NumberOfObjects = (Square.NumberOfObjects || 0) +1; 
        }

        Square.prototype = Object.create(Rect.prototype);
        Square.prototype.constructor = Square;

        /* 
        * create array object which will contains set of objects from rect and square classes then display 
        * itâ€™s areas  
        */

        Rect.NumberOfObjects = 0; // Static or Class Property 
        let shapes = [
            new Rect("red", 10, 20),
            new Square("Yellow", 15),
            new Rect("black", 7, 10),
            new Square("pink", 5),
            new Rect("white", 5, 10),
            new Square("cyan", 9),
            new Square("cyan", 5),
            new Square("cyan", 3),
        ];

        for (let i = 0; i < shapes.length; i++) {
            shapes[i].toString();
        } 
        
        Rect.DisplayNumberOFObjects = function () {
            return this.NumberOfObjects; 
        }; 

        Square.DisplayNumberOFObjects = function () {
            return this.NumberOfObjects; 
        }; 

        console.log( `Number of Rectangles: ${Rect.DisplayNumberOFObjects()}`)
        console.log(`Number of Squares: ${Square.DisplayNumberOFObjects()}`)
    </script>
</body>
</html>